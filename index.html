<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"></script>
    <script src="js/idlespiral.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <script>

      var incrementaladventures_decrypted = []
      function decryptIncrementalAdventures ( ) {
        const input = document.getElementById('input').value

        // AES "gwFgN"
        createDivider('decryption-container', "AES \"gwFgN\"")
        const aes = CryptoJS.AES.decrypt(input, "gwFgN").toString(CryptoJS.enc.Utf8)
        incrementaladventures_decrypted = createColumns('decryption-container', [aes])
      }
      function encryptIncrementalAdventures ( ) {
        const input = incrementaladventures_decrypted.map( (x) => x.value )

        // AES "gwFgN"
        createDivider('encryption-container', "AES \"gwFgN\"")
        const aes = input.map( (x) => CryptoJS.AES.encrypt(x, "gwFgN") )
        createColumns('encryption-container', aes)
      }

      function changeEditor ( ) {
        const option = document.getElementById('option').value
        if ( option === 'idlespiral' )
          changeEditorIdleSpiral()
        if ( option === 'incrementaladventures' )
          changeEditorIncrementalAdventures()
      }

      function addTextarea ( elem, disabled = false ) {
        const textarea = document.createElement('textarea')
        textarea.classList.add('column1')
        textarea.disabled = disabled
        elem.appendChild(textarea)
        return textarea
      }
      function addDivider ( elem, text, hovertext = '' ) {
        var divider = document.createElement('div')
        divider.classList.add('divider')
        divider.innerHTML = text
        if ( hovertext !== '' )
          divider.title = hovertext
        elem.appendChild(divider)
        return divider
      }
      function addColumns ( elem, count ) {
        var divs = []
        for ( let i = 0; i < count; ++i ) {
          const column = document.createElement('div')
          column.classList.add('column' + count)
          elem.appendChild(column)
          divs.push(column)
        }
        return divs
      }

      function changeEditorIncrementalAdventures ( ) {

      }
    </script>
  </head>
  <body>
    <div>
      <div id="main">
        <div id="header">
          <select id="option" onchange="changeEditor()">
            <option hidden disabled selected value> -- select an option -- </option>
            <option value="idlespiral">Idle Spiral</option>
            <option value="incrementaladventures">Incremental Adventures</option>
          </select>
        </div>
        <div id="editor">

        </div>
      </div>
    </div>
  </body>
</html>
